local lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/WhoGodsyoure/Home/refs/heads/main/%E4%BA%BA%E7%94%9F%E3%81%AE%E6%84%8F%E5%91%B3%E3%81%A8%E3%81%AF%E4%BD%95%E3%81%8B"))() 
local FlagsManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/WhoGodsyoure/Home/refs/heads/main/Configure"))()

local main = lib:Load({
      Title = 'ArchiveXNova',
      ToggleButton = "rbxassetid://85025739024001",
	  BindGui = Enum.KeyCode.RightControl,
  })

local Main = main:AddTab("Win")
main:SelectTab()

local MainSection = Main:AddSection({Title = "Drive A Car Down A Slide V2", Description = "Description", Defualt = false , Locked = false})
local GroupButtons =   MainSection:AddGroupButton()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local Player = Players.LocalPlayer
local TARGET = CFrame.new(1646.445, 378.074, -78.629)

local loopActive = false
local loopConn
local loopEndTime
local delayValue = 1
local killDelay = 1

local function Character()
    return Player.Character or Player.CharacterAdded:Wait()
end

local function HRP()
    return Character():WaitForChild("HumanoidRootPart")
end

local function KillWithDelay()
    task.delay(killDelay, function()
        local hum = Character():FindFirstChildOfClass("Humanoid")
        if hum then
            hum.Health = 0
        end
    end)
end

local function stopAll()
    loopActive = false
    loopEndTime = nil
    if loopConn then
        loopConn:Disconnect()
        loopConn = nil
    end
end

local function teleportOnce(d)
    stopAll()
    if d > 0 then task.wait(d) end
    HRP().CFrame = TARGET
    KillWithDelay()
end

local function startLoop()
    stopAll()
    loopActive = true
    loopConn = RunService.Heartbeat:Connect(function()
        if not loopActive then return end

        if loopEndTime and os.clock() >= loopEndTime then
            stopAll()
            KillWithDelay()
            return
        end

        HRP().CFrame = TARGET
        KillWithDelay()

        if delayValue > 0 then
            task.wait(delayValue)
        end
    end)
end

local Modes = {
    ["One-Time | Normal"] = function() teleportOnce(0.4) end,
    ["One-Time | Fast"] = function() teleportOnce(0.15) end,
    ["One-Time | Super Fast"] = function() teleportOnce(0) end,

    ["Loop | Normal Loop"] = function() delayValue = 0.4 startLoop() end,
    ["Loop | Fast Loop"] = function() delayValue = 0.15 startLoop() end,
    ["Loop | Safe Loop"] = function() delayValue = 1 startLoop() end,
    ["Stop Loop"] = function() stopAll() end,

    ["Time | Run 30 Seconds"] = function()
        delayValue = 0.25
        loopEndTime = os.clock() + 30
        startLoop()
    end,

    ["Time | Run 1 Minute"] = function()
        delayValue = 0.25
        loopEndTime = os.clock() + 60
        startLoop()
    end,

    ["Stability | Safe Mode"] = function()
        delayValue = 1.2
        startLoop()
    end,

    ["Performance | Light Mode"] = function()
        delayValue = 0.6
        startLoop()
    end,

    ["Performance | Normal Mode"] = function()
        delayValue = 0.3
        startLoop()
    end,

    ["AFK | AFK Mode"] = function()
        delayValue = 0
        startLoop()
    end,

    ["System | Stop All"] = function()
        stopAll()
    end,
}

local Options = {}
for k in pairs(Modes) do
    Options[#Options + 1] = k
end
table.sort(Options)

MainSection:AddDropdown("TeleportController", {
    Title = "Teleport",
    Description = "",
    Options = Options,
    Default = "",
    PlaceHolder = "Select Mode",
    Multiple = false,
    Callback = function(choice)
        local f = Modes[choice]
        if f then f() end
    end
})

local Main = main:AddTab("Upgrade")
main:SelectTab()

local MainSection = Main:AddSection({Title = "Drive A Car Down A Slide", Description = "Description", Defualt = false , Locked = false})
local GroupButtons =   MainSection:AddGroupButton()

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local Event = ReplicatedStorage.Remotes.BuyUpgrade
local LoopConnection

local function stopLoop()
    if LoopConnection then
        LoopConnection:Disconnect()
        LoopConnection = nil
    end
end

local function fireOnce(upgrade)
    stopLoop()
    Event:FireServer(upgrade)
end

local function fireLoop(upgrade)
    stopLoop()
    LoopConnection = RunService.Heartbeat:Connect(function()
        Event:FireServer(upgrade)
    end)
end

local Modes = {
    ["PlayerSpeed | Normal (Once)"] = function() fireOnce("PlayerSpeed") end,
    ["PlayerSpeed | Loop"] = function() fireLoop("PlayerSpeed") end,
    ["PlayerSpeed | Stop Loop"] = function() stopLoop() end,

    ["BoostSpeed | Normal (Once)"] = function() fireOnce("BoostSpeed") end,
    ["BoostSpeed | Loop"] = function() fireLoop("BoostSpeed") end,
    ["BoostSpeed | Stop Loop"] = function() stopLoop() end,

    ["CarBraking | Normal (Once)"] = function() fireOnce("CarBraking") end,
    ["CarBraking | Loop"] = function() fireLoop("CarBraking") end,
    ["CarBraking | Stop Loop"] = function() stopLoop() end,

    ["+1BulletSpawn | Normal (Once)"] = function() fireOnce("+1BulletSpawn") end,
    ["+1BulletSpawn | Loop"] = function() fireLoop("+1BulletSpawn") end,
    ["+1BulletSpawn | Stop Loop"] = function() stopLoop() end,
}

local Options = {}
for k in pairs(Modes) do
    Options[#Options + 1] = k
end
table.sort(Options)

MainSection:AddDropdown("EpicDropDownName", {
    Title = "Buy Upgrade Mode",
    Description = "",
    Options = Options,
    Default = "",
    PlaceHolder = "Search Upgrade / Mode",
    Multiple = false,
    Callback = function(choice)
        local action = Modes[choice]
        if action then
            action()
        end
    end
})
